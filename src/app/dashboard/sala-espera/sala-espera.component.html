<!-- sala-espera.component.html -->
<div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50">
  <div class="relative bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 rounded-3xl shadow-2xl border border-cyan-500/30 p-8 max-w-lg w-full overflow-hidden modal-container glow-effect">
    
    <!-- Animated water effect background -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-blue-500/20 to-transparent animate-pulse"></div>
      <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-cyan-500/20 to-transparent animate-pulse" style="animation-delay: 0.5s"></div>
    </div>

    <!-- Flash Message -->
    <div *ngIf="flash.success" 
         class="bg-emerald-500/20 border border-emerald-400/50 text-emerald-300 px-4 py-3 rounded-xl mb-6 backdrop-blur-sm">
      {{ flash.success }}
    </div>

    <!-- Header Section -->
    <div class="text-center mb-8">
      <div class="relative inline-block mb-4">
        <div class="absolute -inset-2 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full blur opacity-30 animate-pulse"></div>
        <div class="relative bg-slate-800 rounded-full p-4 border border-cyan-500/30 float-effect">
          <svg class="w-12 h-12 text-cyan-400 mx-auto" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.5 8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5zm9 0c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5zM12 17.5c-2.33 0-4.31-1.46-5.11-3.5h10.22c-.8 2.04-2.78 3.5-5.11 3.5z"/>
          </svg>
        </div>
      </div>
      <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2">
        ðŸŒŠ Batalla Naval ðŸŒŠ
      </h1>
      <p class="text-slate-300 text-lg">Preparando el campo de batalla...</p>
    </div>

    <!-- InformaciÃ³n de la partida -->
    <div *ngIf="partida" class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-slate-700/50">
      <div class="flex items-center justify-center mb-3">
        <svg class="w-6 h-6 text-orange-400 mr-2" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <h2 class="text-2xl font-bold text-orange-400">
          {{ partida.nombre }}
        </h2>
      </div>
      <p *ngIf="partida.descripcion" class="text-slate-300 text-center leading-relaxed">
        {{ partida.descripcion }}
      </p>
    </div>

    <!-- Loading Spinner Naval -->
    <div class="flex justify-center mb-8" *ngIf="loading">
      <div class="relative naval-spinner">
        <div class="w-16 h-16 border-4 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin"></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <svg class="w-6 h-6 text-cyan-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v-2h2c1.38 0 2.63-.56 3.54-1.46C8.15 16.93 9.05 16 10 16h4c.95 0 1.85.93 2.46 1.54C17.37 18.44 18.62 19 20 19h2v2h-2z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Status Message -->
    <div *ngIf="!loading" class="text-center mb-6">
      <div class="bg-slate-800/30 backdrop-blur-sm rounded-xl p-4 border border-slate-600/30">
        <p class="text-slate-200 text-lg font-medium">
          {{ statusMessage }}
        </p>
      </div>
    </div>

    <!-- Contador de jugadores -->
    <div *ngIf="!loading" class="mb-6">
      <div class="flex justify-center items-center space-x-4 mb-4">
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 bg-emerald-500 rounded-full animate-pulse"></div>
          <span class="text-slate-300">Jugador 1</span>
        </div>
        <div class="text-2xl text-slate-500">VS</div>
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 rounded-full" [ngClass]="jugadoresActuales >= 2 ? 'bg-emerald-500 animate-pulse' : 'bg-slate-600'"></div>
          <span class="text-slate-300">Jugador 2</span>
        </div>
      </div>
      <div class="text-center">
        <span class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400">
          {{ jugadoresActuales }}/2
        </span>
        <p class="text-slate-400 text-sm mt-1">Marineros listos para la batalla</p>
      </div>
    </div>

    <!-- Barra de progreso naval -->
    <div *ngIf="!loading" class="mb-8">
      <div class="relative w-full h-3 bg-slate-700 rounded-full overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-slate-700 to-slate-600 rounded-full"></div>
        <div
          class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full transition-all duration-700 ease-in-out shadow-lg"
          [style.width.%]="progressPercentage">
          <div class="absolute inset-0 bg-white/20 rounded-full animate-pulse"></div>
        </div>
        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center">
          <div class="text-xs font-semibold text-white drop-shadow-lg">
            {{ progressPercentage }}%
          </div>
        </div>
      </div>
    </div>

    <!-- Decorative elements -->
    <div class="absolute top-4 right-4 w-8 h-8 border-2 border-cyan-500/30 rounded-full animate-ping"></div>
    <div class="absolute bottom-4 left-4 w-6 h-6 border-2 border-blue-500/30 rounded-full animate-ping" style="animation-delay: 1s"></div>
    <div class="absolute top-1/2 left-4 w-4 h-4 bg-cyan-500/20 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
    <div class="absolute top-1/4 right-8 w-5 h-5 bg-blue-500/20 rounded-full animate-pulse" style="animation-delay: 1.5s"></div>
  </div>
</div>
